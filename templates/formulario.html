<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Permiso Universal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #011627; font-family: monospace; color: white; padding: 20px; text-align: center; }
    input, textarea, button {
      padding: 10px; margin: 5px; width: 90%; max-width: 400px;
      font-size: 16px; border-radius: 8px; border: none;
    }
    input, textarea { background: #d1f7c4; color: #000; text-transform: uppercase; }
    button { background: #ff3366; color: white; font-weight: bold; cursor: pointer; }
    form { background: #022b3a; padding: 20px; border-radius: 10px; margin: 0 auto; }
  </style>
</head>
<body>
  <h1>Permiso Universal</h1>

  <form method="POST">
    <input type="text" name="marca" placeholder="Marca" id="marca" required>
    <input type="text" name="linea" placeholder="Línea" id="linea" required>
    <input type="text" name="año" placeholder="Año" id="anio" required>
    <input type="text" name="serie" placeholder="Número de Serie" id="serie" required>
    <input type="text" name="motor" placeholder="Número de Motor" id="motor" required>
    <input type="text" name="color" placeholder="Color" id="color" required>
    <input type="text" name="contribuyente" placeholder="Nombre del Contribuyente" id="contribuyente" required>
    <button type="submit">Generar PDF</button>
  </form>

  <h3 style="margin-top:30px;">Texto automático:</h3>
  <textarea id="autotexto" rows="8" placeholder="Escribe o pega todo el cagadero aquí..."></textarea>

  <script>
    const marcas = {
      "BOCHO": ["VOLKSWAGEN", "SEDAN"],
      "ITALIKITA": ["ITALIKA"],
      "HARLI": ["HARLEY DAVIDSON"],
      "TROCA": ["FORD", "PICKUP"],
      "TSURU": ["NISSAN", "TSURU"],
      "CIVIK": ["HONDA", "CIVIC"],
      "CHEVY": ["CHEVROLET", "CHEVY"],
      "CAMIONETA": ["FORD", "PICKUP"],
      "RAM": ["DODGE", "RAM"],
      "JEEPETA": ["JEEP", "CHEROKEE"]
    };

    const colores = {
      "ROJO": ["ROJO", "ROJA", "VINO", "CEREZA", "BURGUNDY"],
      "AZUL": ["AZUL", "AZULITO", "CELESTE", "REY", "MARINO"],
      "NEGRO": ["NEGRO", "OBSCURO", "NOCHE", "EBANO"],
      "BLANCO": ["BLANCO", "HUESO", "PERLA", "ESTELAR"],
      "GRIS": ["GRIS", "OXFORD", "PLATA", "PLATEADO"],
      "VERDE": ["VERDE", "MILITAR", "BANDERA", "PASTO", "ESMERALDA"],
      "AMARILLO": ["AMARILLO", "MOSTAZA"],
      "NARANJA": ["NARANJA", "ANARANJADO"],
      "CAFÉ": ["CAFÉ", "CHOCOLATE", "MARRÓN"],
      "DORADO": ["DORADO", "ORO"],
      "ROSA": ["ROSA", "FUSHIA", "BARBIE"]
    };

    const motores = {
      "MEX": "MÉXICO", "USA": "USA", "CHINA": "CHINA", "BRASIL": "BRASIL", "JAP": "JAPÓN",
      "GER": "ALEMANIA", "KOR": "COREA", "INDIA": "INDIA", "EGIPTO": "EGIPTO", "BELÉN": "BELÉN"
    };

    document.getElementById("autotexto").addEventListener("input", () => {
      const texto = document.getElementById("autotexto").value.toUpperCase();

      // MARCA Y LÍNEA
      for (let apodo in marcas) {
        if (texto.includes(apodo)) {
          const datos = marcas[apodo];
          document.getElementById("marca").value = datos[0];
          if (datos[1]) document.getElementById("linea").value = datos[1];
          break;
        }
      }

      // COLOR
      for (let base in colores) {
        for (let variante of colores[base]) {
          if (texto.includes(variante)) {
            document.getElementById("color").value = base;
            break;
          }
        }
      }

      // MOTOR
      for (let clave in motores) {
        if (texto.includes(clave)) {
          document.getElementById("motor").value = motores[clave];
          break;
        }
      }

      // AÑO
      const anio = texto.match(/\b(18[0-9]{2}|19[0-9]{2}|20[0-9]{2}|3000)\b/);
      if (anio) document.getElementById("anio").value = anio[0];

      // SERIE
      const serie = texto.match(/\b[A-HJ-NPR-Z0-9]{17}\b/);
      if (serie) document.getElementById("serie").value = serie[0];

      // CONTRIBUYENTE (última línea que no es número ni VIN)
      const lineas = texto.split("\n").map(x => x.trim()).filter(l => l.length > 5);
      const posibleNombre = lineas[lineas.length - 1];
      if (posibleNombre) document.getElementById("contribuyente").value = posibleNombre;
    });
  </script>
</body>
</html>
